---
import { getCollection } from 'astro:content';
import MDXLayout from "../../layouts/MDXLayout.astro";

export async function getStaticPaths() {
  const postEntries = await getCollection('recipes');
  console.log(await getCollection('recipes'));
  return postEntries.map(entry => ({
    params: {slug: entry.slug}, props: {entry},
  }));
  }

const {entry} = Astro.props;
const {Content} = await entry.render();
const { ingredients, preparation, image } = entry.data;
---

<MDXLayout frontmatter={entry.data}>
  <!-- Top section for content and image -->
  <div class="mb-8">
    <Content/>
  </div>

  <!-- Two-column layout for ingredients and preparation -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Left column: Ingredients -->
    <div class="bg-muted p-4 rounded-lg">
      <h2 class="text-xl font-bold mb-4">Ingredients</h2>
      {ingredients && Array.isArray(ingredients) ? (
        <ul class="list-disc pl-5 space-y-2">
          {ingredients.map((ingredient) => (
            <li>{ingredient}</li>
          ))}
        </ul>
      ) : (
        <p>No ingredients listed</p>
      )}
    </div>

    <!-- Right column: Preparation -->
    <div class="bg-muted p-4 rounded-lg">
      <h2 class="text-xl font-bold mb-4">Preparation</h2>
      {preparation && Array.isArray(preparation) ? (
        <ol class="list-decimal pl-5 space-y-3">
          {preparation.map((step) => (
            <li>{step}</li>
          ))}
        </ol>
      ) : (
        <p>No preparation steps listed</p>
      )}
    </div>
  </div>
</MDXLayout>
